(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{147:function(e,t,a){e.exports={UserLogsContainer:"UserUploadLogs_UserLogsContainer__3nFOm",Title:"UserUploadLogs_Title__1sFZ9",Message:"UserUploadLogs_Message__1ZlcE"}},203:function(e,t,a){e.exports={LoginPortalContainer:"LoginPortal_LoginPortalContainer__2EovU",LoginBox:"LoginPortal_LoginBox__3v3Ze"}},206:function(e,t,a){e.exports={DraggerInner:"CSVUpload_DraggerInner__3iO90"}},299:function(e,t,a){},301:function(e,t,a){},303:function(e,t,a){e.exports={PasswordResetContainer:"PasswordResetCellRenderer_PasswordResetContainer__2EW8L"}},310:function(e,t,a){e.exports=a(520)},520:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(11),c=a.n(o),s=a(282),l=a(25),i=a(28),u=a(26),m=a(29),d=a(79),p=a.n(d),f=a(530),h=a(522),g=a(531),v=a(529),b=a(52),E=a(203),C=a.n(E),N=a(523),O=a(525),_=a(78),w=a(93),j=a.n(w),U=function(e){return j.a.post("http://gush0ae2.utcapp.com:8081/login",e)},y=function(e){return j.a.get("http://gush0ae2.utcapp.com:8081/user/all",{headers:{Authorization:e}}).then(function(e){return e.data}).catch(function(e){return console.log(e)})},A=function(e,t){return j.a.post("http://gush0ae2.utcapp.com:8081/user",t,{headers:{Authorization:e}})},S=function(e,t,a){return j.a.put("http://gush0ae2.utcapp.com:8081/user/".concat(t),a,{headers:{Authorization:e}})},L=function(e,t,a){return j.a.put("http://gush0ae2.utcapp.com:8081/user/".concat(t),a,{headers:{Authorization:e}})},T=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={redirectToReferrer:!1},a.login=function(e){e.preventDefault(),U(a.props.form.getFieldsValue()).then(function(e){if(200===e.status)return e.data.Authorization}).then(function(e){je.dispatch({type:"LOAD_TOKEN",value:e}),je.dispatch({type:"UPDATE_AUTH",value:!0}),a.setState({redirectToReferrer:!0})}).catch(function(e){return console.log(e)})},a.render=function(){var e=a.props.form.getFieldDecorator;return a.state.redirectToReferrer?r.a.createElement(v.a,{to:"/CreateUsers"}):r.a.createElement("div",{className:C.a.LoginPortalContainer},r.a.createElement(N.a,{onSubmit:a.login},r.a.createElement("div",{className:C.a.LoginBox},r.a.createElement(N.a.Item,null,e("email")(r.a.createElement(O.a,{placeholder:"User Name"}))),r.a.createElement(N.a.Item,null,e("password")(r.a.createElement(O.a.Password,{placeholder:"Password"}))),r.a.createElement(_.a,{htmlType:"submit"},"Login"))))},a}return Object(m.a)(t,e),t}(n.Component),P=N.a.create()(T),D=a(94),x=a.n(D),k=a(526),R=a(206),F=a.n(R),H=a(292),M=a.n(H),V=a(524),z=a(527),B=a(18),G=V.a.Dragger,I={accept:".csv",action:"//jsonplaceholder.typicode.com/posts/",onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log(e.fileList),"done"===t?(K(e.fileList[0].originFileObj),z.a.success("".concat(e.file.name," file uploaded successfully."))):"error"===t&&z.a.error("".concat(e.file.name," file upload failed."))}},K=function(e){M.a.parse(e,{header:!0,skipEmptyLines:!0,complete:function(e){je.dispatch({type:"CSV_UPLOAD",value:e.data})}})},Z=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).render=function(){return r.a.createElement("div",{className:F.a.CSVUploadContainer},r.a.createElement(G,I,r.a.createElement("div",{className:F.a.DraggerInner},r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(B.a,{type:"inbox"})),r.a.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload"),r.a.createElement("p",{className:"ant-upload-hint"},"Support upload of .CSV files only"))))},a}return Object(m.a)(t,e),t}(n.Component),J=a(299),W=a.n(J),Y=a(305),q=(a(491),[{Header:"Email",accessor:"email"},{Header:"Password",accessor:"password"},{Header:"First Name",accessor:"firstName"},{Header:"Last Name",accessor:"lastName"},{Header:"Sap Plant",accessor:"sapPlant"},{Header:"Active",accessor:"active"}]),Q=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).render=function(){return r.a.createElement("div",{className:W.a.PreviewContainer},r.a.createElement(Y.a,{data:a.props.csvData,columns:q,defaultPageSize:5}))},a}return Object(m.a)(t,e),t}(n.Component),X=Object(b.b)(function(e){return{csvData:e.csvData}})(Q),$=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).addUsersFromCsv=function(){a.props.csvData.forEach(function(e){var t={email:e.email,password:e.password,firstName:e.firstName,lastName:e.lastName,sapPlant:e.sapPlant,active:!0};A(a.props.bearerToken,t).then(function(e){200===e.status&&console.log(e)}).catch(function(e){console.log(e),console.log(t),z.a.error("User: ".concat(t.email,": ").concat(e.message));var n=Object.assign(t);n.message="".concat(e.message),a.props.onServerResp(n)})})},a.render=function(){return r.a.createElement(_.a,{type:"dashed",onClick:a.addUsersFromCsv},r.a.createElement(B.a,{type:"usergroup-add"}),"Add Users")},a}return Object(m.a)(t,e),t}(n.Component),ee=Object(b.b)(function(e){return{csvData:e.csvData,bearerToken:e.bearerToken}},function(e){return{onServerResp:function(t){return e({type:"UPDATE_USER_LOGS",value:t})}}})($),te=k.a.Step,ae=[{stage:r.a.createElement(Z,null)},{stage:r.a.createElement(X,null)}],ne=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={currentStep:0},a.next=function(){a.setState({currentStep:a.state.currentStep+1})},a.prev=function(){a.setState({currentStep:a.state.currentStep-1})},a.render=function(){return r.a.createElement("div",{className:x.a.StepsContainer},r.a.createElement(k.a,{current:a.state.currentStep},r.a.createElement(te,{title:"Upload Csv"}),r.a.createElement(te,{title:"Preview"})),r.a.createElement("div",{className:x.a.ContentContainer},ae[a.state.currentStep].stage),r.a.createElement("div",{className:x.a.StepNavigationContainer},a.state.currentStep>0&&r.a.createElement(_.a,{type:"primary",onClick:a.prev},"Previous"),a.state.currentStep<ae.length-1&&r.a.createElement("div",{className:x.a.NextButton},r.a.createElement(_.a,{type:"primary",onClick:a.next},"Next")),a.state.currentStep===ae.length-1&&r.a.createElement("div",{className:x.a.NextButton},r.a.createElement(ee,null))))},a}return Object(m.a)(t,e),t}(n.Component),re=a(301),oe=a.n(re),ce=a(302),se=(a(518),a(519),a(303)),le=a.n(se),ie=a(521),ue=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={data:a.props.data,bearerToken:je.getState().bearerToken},a.confirm=function(e){L(a.state.bearerToken,a.state.data.id,{password:"secret123"}).then(function(e){200===e.status&&(console.log(e),z.a.success("Password Reset for ".concat(e.data.email," to secret123")))}).catch(function(e){console.log(e),z.a.error("".concat(e))})},a.render=function(){return r.a.createElement("div",{className:le.a.PasswordResetContainer},r.a.createElement(ie.a,{title:"Are you sure you want to reset ".concat(a.state.data.email),onConfirm:a.confirm,okText:"Yes",cancelText:"No"},r.a.createElement(_.a,{size:"small",type:"dashed",style:{color:"red"}},"Reset")))},a}return Object(m.a)(t,e),t}(n.Component),me=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={data:[],columnDefs:[{headerName:"ID",field:"id",width:80,sort:"desc"},{headerName:"Email",field:"email",editable:!0,filter:"agTextColumnFilter"},{headerName:"First Name",field:"firstName",editable:!0,filter:"agTextColumnFilter"},{headerName:"Last Name",field:"lastName",editable:!0,filter:"agTextColumnFilter"},{headerName:"Sap Plant",filter:"agTextColumnFilter",field:"sapPlant",width:100,editable:!0},{headerName:"Active?",filter:"agTextColumnFilter",field:"active",width:90,editable:!0,cellEditor:"agSelectCellEditor",cellEditorParams:{values:[!0,!1]}},{headerName:"Reset Password",cellRenderer:"passwordResetCellRenderer"},{headerName:"Created",field:"createdOn"}],defaultColDef:{resizable:!0,sortable:!0,filter:!0,onCellValueChanged:function(e){var t=e.data.id,n={email:e.data.email,firstName:e.data.firstName,lastName:e.data.lastName,sapPlant:e.data.sapPlant,active:e.data.active};S(a.props.bearerToken,t,n).then(function(t){200===t.status&&(console.log(t),z.a.success("User: ".concat(e.data.email,": ").concat(e.colDef.field,": ").concat(e.oldValue," => ").concat(e.newValue),5))}).catch(function(e){console.log(e),z.a.error("User: ".concat(n.email,": ").concat(e.message),5)})}},frameworkComponents:{passwordResetCellRenderer:ue}},a.componentWillMount=function(){y(a.props.bearerToken).then(function(e){return a.setState({data:e})})},a.onGridReady=function(e){a.gridApi=e.api,a.gridColumnApi=e.columnApi,e.api.sizeColumnsToFit()},a.render=function(){return r.a.createElement("div",{className:oe.a.EditUsersContainer},r.a.createElement("div",{className:"ag-theme-balham",style:{height:"calc(100vh - 60px)",width:"100vw"}},r.a.createElement(ce.AgGridReact,{columnDefs:a.state.columnDefs,rowData:a.state.data,defaultColDef:a.state.defaultColDef,floatingFilter:!0,frameworkComponents:a.state.frameworkComponents,onGridReady:a.onGridReady})))},a}return Object(m.a)(t,e),t}(n.Component),de=Object(b.b)(function(e){return{bearerToken:e.bearerToken}})(me),pe=a(147),fe=a.n(pe),he=a(528),ge=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={visible:!1},a.showDrawer=function(){return a.setState({visible:!0})},a.onClose=function(){return a.setState({visible:!1})},a.render=function(){return r.a.createElement(he.a,{title:"User Logs",placement:"left",closable:!1,onClose:a.onClose,visible:a.state.visible,style:{height:"calc(100vh - 60px)"},width:700},a.props.userlogs.map(function(e,t){return r.a.createElement("div",{className:fe.a.UserLogsContainer},r.a.createElement("div",{className:fe.a.Title},t+1,": ",r.a.createElement("span",null,e.email)," "),r.a.createElement("div",{className:fe.a.Message},e.message))}))},a}return Object(m.a)(t,e),t}(n.Component),ve=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).render=function(){return r.a.createElement(f.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:p.a.HeaderContainer},r.a.createElement("div",{className:p.a.Title},"MROLife User Management"),r.a.createElement("nav",{className:p.a.Nav},r.a.createElement(h.a,{to:"/CreateUsers",className:p.a.Link},"Create New Users"),r.a.createElement(h.a,{to:"/EditUsers",className:p.a.Link},"Edit Users"),r.a.createElement("div",{className:p.a.Link,onClick:function(){return a.child.current.showDrawer()}},"User Logs"))),r.a.createElement(g.a,{exact:!0,path:"/",component:P}),r.a.createElement(be,{path:"/CreateUsers",component:ne}),r.a.createElement(be,{path:"/EditUsers",component:de}),r.a.createElement(ge,{ref:a.child,userlogs:a.props.userLogs})))},a.child=r.a.createRef(),a}return Object(m.a)(t,e),t}(n.Component),be=function(e){var t=e.component,a=Object(s.a)(e,["component"]);return r.a.createElement(g.a,Object.assign({},a,{render:function(e){return je.getState().isAuthenticated?r.a.createElement(t,e):r.a.createElement(v.a,{to:{pathname:"/"}})}}))},Ee=Object(b.b)(function(e){return{userLogs:e.userLogs}})(ve),Ce=a(142),Ne=a(307),Oe=a(95),_e={csvData:[],bearerToken:"",userLogs:[],isAuthenticated:!1},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0,a=Object(Oe.a)({},e);switch(t.type){case"CSV_UPLOAD":return Object(Oe.a)({},e,{csvData:t.value});case"LOAD_TOKEN":return Object(Oe.a)({},e,{bearerToken:t.value});case"UPDATE_USER_LOGS":return Object(Oe.a)({},e,{userLogs:[].concat(Object(Ne.a)(e.userLogs),[t.value])});case"UPDATE_AUTH":return Object(Oe.a)({},e,{isAuthenticated:t.value})}return a};a.d(t,"store",function(){return je});var je=Object(Ce.b)(we);c.a.render(r.a.createElement(b.a,{store:je},r.a.createElement(Ee,null)),document.getElementById("root"))},79:function(e,t,a){e.exports={HeaderContainer:"App_HeaderContainer__11Ymq",Menu:"App_Menu__3UGKe",Title:"App_Title__HBdPg",Nav:"App_Nav__3idUV",Link:"App_Link__AN3yM"}},94:function(e,t,a){e.exports={StepsContainer:"CreateNewUsers_StepsContainer__1xw7x",ContentContainer:"CreateNewUsers_ContentContainer__2Q5dN",StepNavigationContainer:"CreateNewUsers_StepNavigationContainer__1fTuA",NextButton:"CreateNewUsers_NextButton__Af4uM"}}},[[310,1,2]]]);
//# sourceMappingURL=main.27fadcd8.chunk.js.map